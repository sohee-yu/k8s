(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{518:function(t,e,s){"use strict";s.r(e);var a=s(9),c=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"기본-명령어"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#기본-명령어"}},[t._v("#")]),t._v(" 기본 명령어")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("⚡️ 목표")]),t._v(" "),s("p",[t._v("kubectl의 기본적인 사용법을 익힙니다.")])]),t._v(" "),s("p",[s("code",[t._v("🙋‍♂️쿠버네티스는 GUI가 없나요?")]),t._v(" 있습니다. 그래도 처음 공부할 땐 kubectl로 한 땀 한 땀 입력하는 것을 추천합니다.")]),t._v(" "),s("p",[t._v("kubectl의 역할은 쿠버네티스의 상태를 확인하고 원하는 상태를 요청하는 것입니다. 추가로 컨테이너 로그도 확인하고 원격으로 접속할 수 있습니다.")]),t._v(" "),s("p",[t._v("kubectl의 명령어를 익히고 앞으로 실습할 각종 오브젝트(Pod, ReplicaSet, Deployment, Service, ...)의 사용법을 알면 사실상 쿠버네티스의 동작 원리는 다 이해했다고 볼 수 있습니다. "),s("s",[t._v("👨‍🎨 참 쉽죠?!")])]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#kubectl-명령어"}},[t._v("kubectl 명령어")])]),s("li",[s("a",{attrs:{href:"#상태-설정하기-apply"}},[t._v("상태 설정하기 (apply)")])]),s("li",[s("a",{attrs:{href:"#리소스-목록보기-get"}},[t._v("리소스 목록보기 (get)")])]),s("li",[s("a",{attrs:{href:"#리소스-상세-상태보기-describe"}},[t._v("리소스 상세 상태보기 (describe)")])]),s("li",[s("a",{attrs:{href:"#리소스-제거-delete"}},[t._v("리소스 제거 (delete)")])]),s("li",[s("a",{attrs:{href:"#컨테이너-로그-조회-logs"}},[t._v("컨테이너 로그 조회 (logs)")])]),s("li",[s("a",{attrs:{href:"#컨테이너-명령어-전달-exec"}},[t._v("컨테이너 명령어 전달 (exec)")])]),s("li",[s("a",{attrs:{href:"#설정-관리-config"}},[t._v("설정 관리 (config)")])]),s("li",[s("a",{attrs:{href:"#그외"}},[t._v("그외")])]),s("li",[s("a",{attrs:{href:"#마무리"}},[t._v("마무리")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"kubectl-명령어"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kubectl-명령어"}},[t._v("#")]),t._v(" kubectl 명령어")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("명령어")]),t._v(" "),s("th",[t._v("설명")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("apply")])]),t._v(" "),s("td",[t._v("원하는 상태를 적용합니다. 보통 "),s("code",[t._v("-f")]),t._v(" 옵션으로 파일과 함께 사용합니다.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("get")])]),t._v(" "),s("td",[t._v("리소스 목록을 보여줍니다.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("describe")])]),t._v(" "),s("td",[t._v("리소스의 상태를 자세하게 보여줍니다.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("delete")])]),t._v(" "),s("td",[t._v("리소스를 제거합니다.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("logs")])]),t._v(" "),s("td",[t._v("컨테이너의 로그를 봅니다.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("exec")])]),t._v(" "),s("td",[t._v("컨테이너에 명령어를 전달합니다. 컨테이너에 접근할 때 주로 사용합니다.")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("config")])]),t._v(" "),s("td",[t._v("kubectl 설정을 관리합니다.")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("alias로 편하게")]),t._v(" "),s("p",[s("code",[t._v("kubectl")]),t._v("명령어가 은근 오타가 잘나기 때문에 "),s("code",[t._v("k")]),t._v("로 줄여쓰면 편합니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# alias 설정")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("alias")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("k")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kubectl'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# shell 설정 추가")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"alias k='kubectl'\"")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.bashrc\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" ~/.bashrc\n")])])])]),t._v(" "),s("h2",{attrs:{id:"상태-설정하기-apply"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#상태-설정하기-apply"}},[t._v("#")]),t._v(" 상태 설정하기 (apply)")]),t._v(" "),s("p",[s("RouterLink",{attrs:{to:"/guide/#워드프레스-배포"}},[t._v("준비하기#워드프레스 배포")]),t._v("에서 사용한 명령어입니다. 원하는 리소스의 상태를 YAML로 작성하고 apply 명령어로 선언합니다.")],1),t._v(" "),s("usage",{attrs:{text:"kubectl apply -f [파일명 또는 URL]"}}),t._v(" "),s("p",[t._v("특이한 점은 파일명뿐 아니라 URL도 입력이 가능하다는 것입니다. 실제로 많은 예제가 URL을 제공하고 있습니다.")]),t._v(" "),s("p",[t._v("여기서는 워드프레스를 다시 배포하겠습니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 다시 한번 워드프레스 배포하기 (URL로!)")]),t._v("\nkubectl apply -f https://subicura.com/k8s/code/guide/index/wordpress-k8s.yml\n")])])]),s("h2",{attrs:{id:"리소스-목록보기-get"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#리소스-목록보기-get"}},[t._v("#")]),t._v(" 리소스 목록보기 (get)")]),t._v(" "),s("p",[t._v("쿠버네티스에 선언된 리소스를 확인하는 명령어는 다음과 같습니다.")]),t._v(" "),s("usage",{attrs:{text:"kubectl get [TYPE]"}}),t._v(" "),s("p",[t._v("다양한 옵션들이 있는데 여기서는 출력 형태를 변경할 수 있는 "),s("code",[t._v("-o")]),t._v("와 레이블을 확인할 수 있는 "),s("code",[t._v("--show-labels")]),t._v("를 알아봅니다.")]),t._v(" "),s("p",[t._v("이전에 생성한 워드프레스와 MySQL 목록을 확인해봅니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 조회")]),t._v("\nkubectl get pod\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 줄임말(Shortname)과 복수형 사용가능")]),t._v("\nkubectl get pods\nkubectl get po\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 여러 TYPE 입력")]),t._v("\nkubectl get pod,service\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\nkubectl get po,svc\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod, ReplicaSet, Deployment, Service, Job 조회 => all")]),t._v("\nkubectl get all\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 결과 포멧 변경")]),t._v("\nkubectl get pod -o wide\nkubectl get pod -o yaml\nkubectl get pod -o json\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Label 조회")]),t._v("\nkubectl get pod --show-labels\n")])])]),s("h2",{attrs:{id:"리소스-상세-상태보기-describe"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#리소스-상세-상태보기-describe"}},[t._v("#")]),t._v(" 리소스 상세 상태보기 (describe)")]),t._v(" "),s("p",[t._v("쿠버네티스에 선언된 리소스의 상세한 상태를 확인하는 명령어는 다음과 같습니다.")]),t._v(" "),s("usage",{attrs:{text:"kubectl describe [TYPE]/[NAME] 또는 [TYPE] [NAME]"}}),t._v(" "),s("p",[t._v("특정 리소스의 상태가 궁금하거나 생성이 실패한 이유를 확인할 때 주로 사용합니다. 워드프레스 Pod이 언제 생성되었고 어떤 상태인지 상세하게 알아봅니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 조회로 이름 검색")]),t._v("\nkubectl get pod\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 조회한 이름으로 상세 확인")]),t._v("\nkubectl describe pod/wordpress-5f59577d4d-8t2dg "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 환경마다 이름이 다릅니다")]),t._v("\n")])])]),s("h2",{attrs:{id:"리소스-제거-delete"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#리소스-제거-delete"}},[t._v("#")]),t._v(" 리소스 제거 (delete)")]),t._v(" "),s("p",[t._v("쿠버네티스에 선언된 리소스를 제거하는 명령어는 다음과 같습니다.")]),t._v(" "),s("usage",{attrs:{text:"kubectl delete [TYPE]/[NAME] 또는 [TYPE] [NAME]"}}),t._v(" "),s("p",[t._v("워드프레스 Pod을 제거해보겠습니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 조회로 이름 검색")]),t._v("\nkubectl get pod\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 조회한 Pod 제거")]),t._v("\nkubectl delete pod/wordpress-5f59577d4d-8t2dg\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Pod을 제거해도 자꾸 살아납니다")]),t._v(" "),s("p",[t._v("정상적인 결과입니다. 잠시 후 배울 ReplicaSet이 Pod의 개수를 유지해줍니다.")])]),t._v(" "),s("h2",{attrs:{id:"컨테이너-로그-조회-logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#컨테이너-로그-조회-logs"}},[t._v("#")]),t._v(" 컨테이너 로그 조회 (logs)")]),t._v(" "),s("p",[t._v("컨테이너의 로그를 확인하는 명령어는 다음과 같습니다.")]),t._v(" "),s("usage",{attrs:{text:"kubectl logs [POD_NAME]"}}),t._v(" "),s("p",[t._v("실시간 로그를 보고 싶다면 "),s("code",[t._v("-f")]),t._v(" 옵션을 이용하고 하나의 Pod에 여러 개의 컨테이너가 있는 경우는 "),s("code",[t._v("-c")]),t._v(" 옵션으로 컨테이너를 지정해야 합니다. 워드프레스 로그를 확인해보겠습니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 조회로 이름 검색")]),t._v("\nkubectl get pod\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 조회한 Pod 로그조회")]),t._v("\nkubectl logs wordpress-5f59577d4d-8t2dg\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 실시간 로그 보기")]),t._v("\nkubectl logs -f wordpress-5f59577d4d-8t2dg\n")])])]),s("h2",{attrs:{id:"컨테이너-명령어-전달-exec"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#컨테이너-명령어-전달-exec"}},[t._v("#")]),t._v(" 컨테이너 명령어 전달 (exec)")]),t._v(" "),s("p",[t._v("컨테이너에 접속하는 명령어는 다음과 같습니다.")]),t._v(" "),s("usage",{attrs:{text:"kubectl exec [-it] [POD_NAME] -- [COMMAND]"}}),t._v(" "),s("p",[t._v("쉘로 접속하여 컨테이너 상태를 확인하는 경우에 "),s("code",[t._v("-it")]),t._v(" 옵션을 사용하고 여러 개의 컨테이너가 있는 경우엔 "),s("code",[t._v("-c")]),t._v(" 옵션으로 컨테이너를 지정합니다. 워드프레스 컨테이너에 접속해봅니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pod 조회로 이름 검색")]),t._v("\nkubectl get pod\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 조회한 Pod의 컨테이너에 접속")]),t._v("\nkubectl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it wordpress-5f59577d4d-8t2dg -- "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])]),s("h2",{attrs:{id:"설정-관리-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#설정-관리-config"}},[t._v("#")]),t._v(" 설정 관리 (config)")]),t._v(" "),s("p",[t._v("kubectl은 여러 개의 쿠버네티스 클러스터를 컨텍스트"),s("sup",[t._v("context")]),t._v("로 설정하고 필요에 따라 선택할 수 있습니다. 현재 어떤 컨텍스트로 설정되어 있는지 확인하고 원하는 컨텍스트를 지정합니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 현재 컨텍스트 확인")]),t._v("\nkubectl config current-context\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 컨텍스트 설정")]),t._v("\nkubectl config use-context minikube\n")])])]),s("h2",{attrs:{id:"그외"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#그외"}},[t._v("#")]),t._v(" 그외")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 전체 오브젝트 종류 확인")]),t._v("\nkubectl api-resources\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 특정 오브젝트 설명 보기")]),t._v("\nkubectl explain pod\n")])])]),s("h2",{attrs:{id:"마무리"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#마무리"}},[t._v("#")]),t._v(" 마무리")]),t._v(" "),s("p",[t._v("지금까지 배운 명령어는 그야말로 아주 기본이 되는 명령어입니다. kubectl은 더 많은 명령어와 옵션을 가지고 있는데, 필요에 따라 하나씩 익혀나가면 됩니다.")]),t._v(" "),s("p",[t._v("워드프레스 리소스를 제거합니다.")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("kubectl delete -f https://subicura.com/k8s/code/guide/index/wordpress-k8s.yml\n")])])])],1)}),[],!1,null,null,null);e.default=c.exports}}]);